# Заготовка виджета amoCRM

Это стартовый набор для написания виджета для [amoCRM](https://developers.amocrm.ru/widgets/).

Вокруг типовой заготовки для виджета из официальной документации для разработчиков написана система автоматизации, позволяющая ускорить разработку.

## Установка и настройка

1. Получить файлы проекта, это возможно двумя путями

    1.1. Скачать архив со страницы [репозитория](https://bitbucket.org/GlebVarenov/amocrm_widget_gulp/downloads/)

    1.2. Получить файлы посредством git clone. В этом случае после получения копии проекта следует УДАЛИТЬ директорию ".git", чтобы ваш виджет был собственным проектом git, а не был привязан к этому проекту.

2. Произвести получение зависимостей node

    ``` shell
    npm install
    ```

3. Внести в файл config.json ваши данные - код виджета и его секретный ключ.

## Файловая структура проекта

* widget-src/   - содержит код виджета, согласно руководству по написанию виджетов amoCRM
* config.json   - содержит настройки целей сборки виджета, изначально поддерживается две цели сборки (рабочая версия и для разработки), но вы можете внести любые изменения, какие вам требуется.
* gulpfile.js   - скрипты сборки [gulp](https://gulpjs.com/)
* build/        - эта директория создаётся в процессе сборки и будет содержать конечный результат скриптов сборки - файл widget.zip

## Использование

* Собрать виджет в версии для разработки (версия виджета в манифесте будет повышена на 0.0.1)

    ``` shell
    npm run dev
    ```

* Собрать виджет в рабочем варианте

    ``` shell
    npm run prod
    ```
